<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>AdminLTE 3 | Index</title>
<!-- Tell the browser to be responsive to screen width -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Font Awesome -->
<link rel="stylesheet"
	href="static/plugins/fontawesome-free/css/all.min.css"
	th:href="@{/plugins/fontawesome-free/css/all.min.css}">
<!-- Ionicons -->
<link rel="stylesheet"
	href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
<!-- Tempusdominus Bbootstrap 4 -->
<link rel="stylesheet"
	href="static/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css"
	th:href="@{/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css}">
<!-- iCheck -->
<link rel="stylesheet"
	href="static/plugins/icheck-bootstrap/icheck-bootstrap.min.css"
	th:href="@{/plugins/icheck-bootstrap/icheck-bootstrap.min.css}">
<!-- JQVMap -->
<link rel="stylesheet" href="static/plugins/jqvmap/jqvmap.min.css"
	th:href="@{/plugins/jqvmap/jqvmap.min.css}">
<!-- Theme style -->
<link rel="stylesheet" href="static/adminlte.min.css"
	th:href="@{/adminlte.min.css}">
<!-- overlayScrollbars -->
<link rel="stylesheet"
	href="static/plugins/overlayScrollbars/css/OverlayScrollbars.min.css"
	th:href="@{/plugins/overlayScrollbars/css/OverlayScrollbars.min.css}">
<!-- Daterange picker -->
<link rel="stylesheet"
	href="static/plugins/daterangepicker/daterangepicker.css"
	th:href="@{/plugins/daterangepicker/daterangepicker.css}">
<!-- summernote -->
<link rel="stylesheet"
	href="static/plugins/summernote/summernote-bs4.css"
	th:href="@{/plugins/summernote/summernote-bs4.css}">

<!--   <link rel="stylesheet" type="text/css" href="static/css/index.css"
	th:href="@{/css/index.css}"> -->
<!-- Google Font: Source Sans Pro -->
<link
	href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700"
	rel="stylesheet">
</head>
<body class="hold-transition sidebar-mini layout-fixed">
	<div class="wrapper">
		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Main content -->

			<section class="content" th:fragment="salesinvoice">
				<!-- <form action="#" th:action="@{/user/sales/print}" th:target="_blank"
					th:object="${trSalesHelper}" method="post" class="form-horizontal">
					 -->
				<form th:object="${trSalesHelper}" class="form-horizontal">
					<div class="container-fluid">
						<div class="row">
							<div class="col-12">
								<div class="callout callout-info">
									<h5>
										<i class="fas fa-info"></i> Invoice:
									</h5>
								</div>


								<!-- Main content -->
								<div class="invoice p-3 mb-3">
									<!-- title row -->
									<div class="row">
										<div class="col-12">
											<h4>
												<i class="fas fa-globe"></i>
												<p></p>
												Company Code <small class="float-right">Date : <label
													th:text="${trSalesHelper.trSales.createdDate}"
													th:field="*{trSales.createdDate}"></label> <input
													type="hidden" th:field="*{trSales.createdDate}"
													th:value="${trSalesHelper.trSales.createdDate}"
													name="${trSalesHelper.trSales.createdDate}">
												</small>
											</h4>
										</div>
										<!-- /.col -->
									</div>
									<!-- info row -->
									<div class="row invoice-info">
										<div class="col-sm-4 invoice-col">
											From
											<address>
												<strong>Admin, Inc.</strong><br> 795 Folsom Ave, Suite
												600<br> San Francisco, CA 94107<br> Phone: (804)
												123-5432<br> Email: info@almasaeedstudio.com
											</address>
										</div>
										<!-- /.col -->
										<div class="col-sm-4 invoice-col">
											<input type="hidden"
												th:field="*{uosBusinessPartnerHelper.uosBusinessPartnerId}"
												th:value="${trSalesHelper.uosBusinessPartnerHelper.uosBusinessPartnerId}"
												name="${trSalesHelper.uosBusinessPartnerHelper.uosBusinessPartnerId}">
											<input type="hidden"
												th:field="*{uosBusinessPartnerHelper.firstName}"
												th:value="${trSalesHelper.uosBusinessPartnerHelper.firstName}"
												name="${trSalesHelper.uosBusinessPartnerHelper.firstName}">
											<input type="hidden"
												th:field="*{uosBusinessPartnerHelper.address}"
												th:value="${trSalesHelper.uosBusinessPartnerHelper.address}"
												name="${trSalesHelper.uosBusinessPartnerHelper.address}">
											<input type="hidden"
												th:field="*{uosBusinessPartnerHelper.phoneNumber}"
												th:value="${trSalesHelper.uosBusinessPartnerHelper.phoneNumber}"
												name="${trSalesHelper.uosBusinessPartnerHelper.phoneNumber}">

											To
											<address>
												<strong
													th:text="${#strings.trim(trSalesHelper.uosBusinessPartnerHelper.uosBusinessPartnerId)}"
													th:field="*{uosBusinessPartnerHelper.uosBusinessPartnerId}">
													<!-- <p ></p> -->
												</strong> <br> <label
													th:text="${#strings.trim(trSalesHelper.uosBusinessPartnerHelper.firstName)}"
													th:field="*{uosBusinessPartnerHelper.firstName}"></label> <br>
												<label
													th:text="${#strings.trim(trSalesHelper.uosBusinessPartnerHelper.address)}"
													th:field="*{uosBusinessPartnerHelper.address}"></label>
												<!-- <br><label  th:text="${#strings.trim(trSalesHelper.uosBusinessPartnerHelper.city)}"></label> -->
												<br> <label
													th:text="${#strings.trim(trSalesHelper.uosBusinessPartnerHelper.phoneNumber)}"
													th:field="*{uosBusinessPartnerHelper.phoneNumber}"></label>
											</address>
										</div>
										<!-- /.col -->
										<div class="col-sm-4 invoice-col">
											<b>Invoice <label
												th:text="${trSalesHelper.trSales.identityNo}"></label> <input
												type="hidden" th:field="*{trSales.identityNo}"
												th:value="${trSalesHelper.trSales.identityNo}"
												name="${trSalesHelper.trSales.identityNo}">
											</b><br> <br> <b>Order ID:</b> <label
												th:text="${trSalesHelper.trSales.id}"></label> <input
												type="hidden" th:field="*{trSales.id}"
												th:value="${trSalesHelper.trSales.id}"
												name="${trSalesHelper.trSales.id}"> <br>
											<!-- <b>Payment Due:</b> 2/22/2014<br>  -->
											<!-- <b>Account:</b> 968-34567 -->
										</div>
										<!-- /.col -->
									</div>
									<!-- /.row -->

									<!-- Table row -->
									<div class="row">
										<div class="col-12 table-responsive">
											<table class="table table-striped" width="100%">
												<col style="width: 10%">
												<col style="width: 10%">
												<col style="width: 20%">
												<col style="width: 10%">
												<col style="width: 15%">
												<col style="width: 35%">
												<thead>
													<tr>
														<th>Qty</th>
														<th>Product</th>
														<th>Description</th>
														<th>Price</th>
														<th>Subtotal</th>
														<th>Notes</th>
													</tr>
												</thead>
												<tbody>
													<tr
														th:each="trSalesDetail,rowStat : ${trSalesHelper.listTrSalesDetail}">
														<td th:text="${trSalesDetail.qty}"></td>
														<td th:text="${trSalesDetail.uomMaterial.id}"></td>
														<td th:text="${trSalesDetail.uomMaterial.description}"></td>
														<td
															th:text="${#numbers.formatDecimal(trSalesDetail.price, 0, 'POINT', 2, 'COMMA')}"
															th:align="right"></td>
														<td
															th:text="${#numbers.formatDecimal(trSalesDetail.subTotalPrice, 0, 'POINT', 2, 'COMMA')}"
															th:align="right"></td>
														<td
															th:utext="${#strings.replace( #strings.escapeXml( trSalesDetail.notes ),T(java.lang.System).getProperty('line.separator'),'&lt;br /&gt;')}"></td>
														<input type="hidden" placeholder="id"
															th:field="*{listTrSalesDetail[__${rowStat.index}__].uomMaterial.id}"
															th:value="${trSalesDetail.uomMaterial.id}"
															name="${trSalesDetail.uomMaterial.id}">

														<input type="hidden" placeholder="qty"
															th:field="*{listTrSalesDetail[__${rowStat.index}__].qty}"
															th:value="${trSalesDetail.qty}"
															name="${trSalesDetail.qty}">

														<input type="hidden" placeholder="id"
															th:field="*{listTrSalesDetail[__${rowStat.index}__].uomMaterial.description}"
															th:value="${trSalesDetail.uomMaterial.description}"
															name="${trSalesDetail.uomMaterial.description}">

														<input type="hidden" placeholder="id"
															th:field="*{listTrSalesDetail[__${rowStat.index}__].price}"
															th:value="${trSalesDetail.price}"
															name="${trSalesDetail.price}">

														<input type="hidden" placeholder="id"
															th:field="*{listTrSalesDetail[__${rowStat.index}__].subTotalPrice}"
															th:value="${trSalesDetail.subTotalPrice}"
															name="${trSalesDetail.subTotalPrice}">

														<input type="hidden" placeholder="id"
															th:field="*{listTrSalesDetail[__${rowStat.index}__].notes}"
															th:value="${trSalesDetail.notes}"
															name="${trSalesDetail.notes}">

														<!-- <input type="hidden" placeholder="Notes"
														th:text="${trSalesDetail.notes}"
														name="${trSalesDetail.notes}" 
														th:field="*{listTrSalesDetail[__${rowStat.index}__].notes}" > -->
														<!--  -->
														<!-- <td th:text="${trSalesDetail.subTotalPrice}"></td> th:utext="${trSalesDetail.notes}" -->
													</tr>
												</tbody>
											</table>
										</div>
										<!-- /.col -->
									</div>
									<!-- /.row -->

									<div class="row">
										<!-- accepted payments column -->
										<div class="col-6">
											<!-- 										<p class="lead">Payment Methods:</p>
										<img src="../../dist/img/credit/visa.png" alt="Visa"> <img
											src="../../dist/img/credit/mastercard.png" alt="Mastercard">
										<img src="../../dist/img/credit/american-express.png"
											alt="American Express"> <img
											src="../../dist/img/credit/paypal2.png" alt="Paypal">

										<p class="text-muted well well-sm shadow-none"
											style="margin-top: 10px;">Etsy doostang zoodles disqus
											groupon greplin oooj voxy zoodles, weebly ning heekya
											handango imeem plugg dopplr jibjab, movity jajah plickers
											sifteo edmodo ifttt zimbra.</p> -->
										</div>
										<!-- /.col -->
										<div class="col-6">
											<!-- <p class="lead">Amount Due 2/22/2014</p> -->

											<div class="table-responsive">
												<table class="table">
													<!-- <tr>
													<th style="width: 50%">Subtotal:</th>
													<td
													th:text="${trSales.subTotalBeforeTax}"></td>
												</tr>
												<tr>
													<th>Tax (9.3%)</th>
													<td>$10.34</td>
												</tr> -->
													<tr>
														<th>Delivery Cost:</th>
														<!-- <td th:text="${trSales.deliveryCost}">$5.80</td> -->
														<td
															th:text="${#numbers.formatDecimal(trSalesHelper.trSales.deliveryCost, 0, 'POINT', 2, 'COMMA')}"
															th:align="right"></td>

														<input type="hidden" placeholder="id"
															th:field="*{trSales.deliveryCost}"
															th:value="${trSalesHelper.trSales.deliveryCost}"
															name="${trSalesHelper.trSales.deliveryCost}"
															th:align="right">
													</tr>
													<tr>
														<th>Total:</th>
														<!-- <td th:text="${trSales.totalPrice}">$265.24</td> -->
														<td
															th:text="${#numbers.formatDecimal(trSalesHelper.trSales.totalPrice, 0, 'POINT', 2, 'COMMA')}"
															th:align="right"></td>

														<input type="hidden" placeholder="id" id="totalPrice"
															th:field="*{trSales.totalPrice}"
															th:value="${trSalesHelper.trSales.totalPrice}"
															name="${trSalesHelper.trSales.totalPrice}">
													</tr>
												</table>
											</div>
										</div>
										<!-- /.col -->
									</div>
									<!-- /.row -->
									<script th:src="@{/plugins/js/qz-tray.js}"></script>
									<script th:inline="javascript">
function printing(){
//	alert(a);
	var a ="abc";
//	var a = <th:text="${printTagHTML}">;
//	var b =  ${printTagHTML};
     var b = [[${printTagHTML}]];
	alert(a); 
	setPrinter("zebra");
	//alert(b);
	var config = getUpdatedConfig();
        var opts = getUpdatedOptions(true);

        var printData = [
            {
                type: 'pixel',
                format: 'html',
                flavor: 'plain',
                /* data : [[${printTagHTML}]] , */
                 data: b, 
                options: opts
            }
        ];

        qz.print(config, printData).catch(displayError);
    
	}
	
	const $btnPrintInvoice = document.querySelector("#btnPrintInvoice");
	$btnPrintInvoice.addEventListener("click", () => {
    alert("btnPrintxx create content sales invoice js");
	setPrinter("zebra");
        var config = getUpdatedConfig();
        var opts = getUpdatedOptions(true);
        var a = [[${printTagHTML}]];
        var printData = [
            {
                type: 'pixel',
                format: 'html',
                flavor: 'plain',
                data: a,
                options: opts
            }
        ];
        qz.print(config, printData).catch(displayError);
    
});
	function printingBtnPrintSalesOrderDetail(){
//		alert(a);
		var a ="abc";
		alert("btnPrintSalesOrderDetail");
	    var a = [[${printTagHTML}]];
	    alert(a);
	    Popup(a);
 	    //var printer = new Printer(a);
	    //printer.print(); 
	    /* var h = "<h1>Example</h1><p>This is a variable I want to print to the printer with the browser!</p>";
	    var d = $("<div>").addClass("print").html(h).appendTo("html");
	    window.print();
	    d.remove(); */ 	    
	}	
	function Printer($c){
	    var h = $c;
	    return {
	        print: function(){
	        	alert($("<div>").html(h));
	        	var d = $("<div>").html(h).appendTo("html");
	        	//document.head.insertAdjacentHTML( 'beforeend', '<link rel="stylesheet" type="text/css" href="/plugins/stylepar.css"/>' );
//	        	var head = document.getElementsByTagName('head')[0];
				/* var head = document.getElementsByTagName('head')[0];
	            var style = document.createElement('link');
	            style.href = "/plugins/stylepar.css";
	            style.type = 'text/css';
	            style.rel = 'stylesheet'; */
	            //h.append(style);
	            //head.append(style);
	            $("body").hide();
	            $(".container-fluid").hide();
	            /* var printContents = document.getElementById("ticket").innerHTML;
	            var originalContents = document.body.innerHTML;            
	            document.body.innerHTML = printContents; */
	            window.print();
	            //document.body.innerHTML = originalContents;
	            d.remove();
	            $(".container-fluid").show();
	            $("body").show();
	        },
	        /* setContent: function($c){
	            h = $c;
	        } */
	    };
	}
	function Popup(data) {
	    var mywindow = window.open('', 'new div', 'height=400,width=600');
	    alert("Popup");
	    //mywindow.document.write('<html><head><title></title>');
//	    mywindow.document.write('<link rel="stylesheet" href="css/midday_receipt.css" type="text/css" />');
		//mywindow.document.write('<link rel="stylesheet" href="/plugins/stylepar.css">');
	    //mywindow.document.write('</head><body >'); 
	    mywindow.document.write(data);
	    //mywindow.document.write('</body></html>');

	    mywindow.print();
	    mywindow.close();

	    return true;
	}
	</script>

									<!-- this row will not appear when printing -->
									<div class="row no-print"></div>
								</div>
								<!-- /.invoice -->
							</div>
							<!-- /.col -->
						</div>
						<!-- /.row -->
					</div>
					<!-- /.container-fluid -->
				</form>
				<div class="col-12">
					<!-- 	<a href="invoice-print.html" target="_blank"
											class="btn btn-default"><i class="fas fa-print"></i>
											Print</a> -->
					<button type="submit" class="btn btn-primary"
						name="btnPrintInvoice" onclick="printing()">Print Invoice</button>
					<button type="submit" class="btn btn-primary"
						name="btnPrintSalesOrderDetail"
						onclick="printingBtnPrintSalesOrderDetail()">Print Sales
						Order Detail</button>
					<!-- <button id="btnPrint" class="hidden-print" onclick="printing()">Print</button> -->


					<button type="button" class="btn btn-success float-right">
						<i class="far fa-credit-card"></i> Submit Payment
					</button>

					<button type="button" class="btn btn-primary float-right"
						style="margin-right: 5px;">
						<i class="fas fa-download"></i> Generate PDF
					</button>
				</div>
			</section>
			<!-- /.content -->

		</div>
		<!-- /.content-wrapper -->
		<footer class="main-footer">
			<strong>Copyright &copy; 2014-2019 <a
				href="http://adminlte.io">AdminLTE.io</a>.
			</strong> All rights reserved.
			<div class="float-right d-none d-sm-inline-block">
				<b>Version</b> 3.0.5
			</div>
		</footer>

		<!-- Control Sidebar -->
		<aside class="control-sidebar control-sidebar-dark">
			<!-- Control sidebar content goes here -->
		</aside>
		<!-- /.control-sidebar -->
	</div>
	<!-- ./wrapper -->

	<!-- jQuery -->

	<!-- Data Tables -->
	<script th:src="@{/plugins/datatables/jquery.dataTables.min.js}"></script>
	<script
		th:src="@{/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js}"></script>
	<script
		th:src="@{/plugins/datatables-responsive/js/dataTables.responsive.min.js}"></script>
	<script
		src="@{/plugins/datatables-responsive/js/responsive.bootstrap4.min.js}"></script>
	<script>
		/* $(function() {
			$("#example1").DataTable({
				"responsive" : true,
				"autoWidth" : false,
			});
			$('#example2').DataTable({
				"paging" : true,
				"lengthChange" : false,
				"searching" : true,
				"ordering" : true,
				"info" : true,
				"autoWidth" : false,
				"responsive" : true,
			});
		}); */
	</script>
</body>
</html>
